(window.webpackJsonp__wix_thunderbolt_app=window.webpackJsonp__wix_thunderbolt_app||[]).push([[78],{850:function(e,t,n){"use strict";n.r(t),n.d(t,"site",(function(){return l})),n.d(t,"page",(function(){return P}));var r,a=n(0),i=n(7),o=n(24),u=n(297);!function(e){e.SM="SM",e.Pass="PASS",e.NONE="NONE"}(r||(r={}));var c=Object(i.h)([Object(i.f)(o.c,u.a),Object(i.f)(o.e,u.a),Object(i.f)(o.b,u.a)],(function(e,t,n){return{handle:function(i){return Object(a.b)(this,void 0,void 0,(function(){var o,u,c,s,b;return Object(a.d)(this,(function(d){return i.pageJsonFileName?[2,i]:(o=i.pageId,u=n.get(),c=u.pagesMap,s=u.loginAndNavigate,c[o]?[2,Object(a.a)(Object(a.a)({},i),{pageJsonFileName:c[o]})]:((b=function(n){var a=e.pagesSecurity[n];return a&&a.requireLogin?r.SM:t.passwordProtected[n]||a&&a.passwordDigest?r.Pass:r.NONE}(o))===r.NONE&&function(e,t){throw new Error("we do not have authentication info for protected page "+e+" page security: "+t)}(o,e.pagesSecurity[o]),s(i,b),[2,null]))}))}))}}})),s=n(6),b=n(424),d=n(279),p=n(298),f=n(269),g=n(44),O=Object(i.h)([Object(i.f)(o.b,u.a),Object(i.f)(o.c,u.a),s.c,f.a,Object(i.g)(d.b),Object(i.g)(p.b),g.f],(function(e,t,n,i,o,u,c){var s=t.customNoPermissionsPageUrl,d=function(e){return Object(a.b)(void 0,void 0,void 0,(function(){var t;return Object(a.d)(this,(function(n){switch(n.label){case 0:return u?(t={},[4,u.promptPasswordDialog(e)]):[3,2];case 1:return[2,(t.authorizedPagesMap=n.sent(),t)];case 2:return[2,{authorizedPagesMap:{}}]}}))}))},p=function(e,t){return Object(a.b)(void 0,void 0,Promise,(function(){return Object(a.d)(this,(function(n){return[2,e===r.SM?Object(a.b)(void 0,void 0,void 0,(function(){var e,t;return Object(a.d)(this,(function(n){switch(n.label){case 0:return o?[4,o.requestAuthentication({})]:[3,3];case 1:return(e=n.sent()).success?(t={},[4,o.authorizeMemberPagesByToken(e.token)]):[3,3];case 2:return[2,(t.authorizedPagesMap=n.sent(),t)];case 3:return[2,{authorizedPagesMap:{},authenticationResult:e}]}}))})):d(t)]}))}))},f=function(e,t){return Object(a.b)(void 0,void 0,Promise,(function(){var r;return Object(a.d)(this,(function(a){return s?[2,n.navigate(s+'?appSectionParams={"restrictedPageId":"'+e+'"}')]:o&&"SM"===t?(r=function(){i.getCurrentRouteInfo()||n.navigate("./")},o.showNoPermissionsToPageDialog(r),[2,!1]):[2,!i.getCurrentRouteInfo()&&n.navigate("./")]}))}))},g=function(t,r){return Object(a.b)(void 0,void 0,void 0,(function(){var o,u,s,d,g;return Object(a.d)(this,(function(O){switch(O.label){case 0:o=t.pageId,O.label=1;case 1:return O.trys.push([1,3,,4]),[4,p(r,o)];case 2:return u=O.sent(),s=u.authorizedPagesMap,d=u.authenticationResult,e.update((function(e){return Object(a.a)(Object(a.a)({},e),{pagesMap:Object.assign(e.pagesMap,s)})})),(null==d?void 0:d.reason)===b.a.CANCELED?[2,!i.getCurrentRouteInfo()&&n.navigate("./")]:s[o]?[2,n.navigate(t.parsedUrl.href)]:[2,f(o,r)];case 3:return g=O.sent(),c.captureError(g,{tags:{feature:"protectedPage"}}),[2,f(o,r)];case 4:return[2]}}))}))};return e.update((function(){return{loginAndNavigate:g,pagesMap:{}}})),{appWillMount:function(){return Object(a.b)(void 0,void 0,void 0,(function(){return Object(a.d)(this,(function(e){return[2]}))}))}}})),v=n(34),h=n(386),j=Object(i.h)([Object(i.f)(o.b,u.a),d.b],(function(e,t){return{getTpaHandlers:function(){var n=this;return{authorizeMemberPages:function(){return Object(a.b)(n,void 0,Promise,(function(){var n;return Object(a.d)(this,(function(r){switch(r.label){case 0:return[4,t.authorizeMemberPagesByCookie()];case 1:return n=r.sent(),e.update((function(e){return Object(a.a)(Object(a.a)({},e),{pagesMap:Object(a.a)(Object(a.a)({},e.pagesMap),n)})})),[2]}}))}))}}}}})),l=function(e){e(s.e.Protected).to(c),e(v.a.AppWillMountHandler).to(O)},P=function(e){e(h.a).to(j)}}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/protectedPages.6c9ed4d9.chunk.min.js.map